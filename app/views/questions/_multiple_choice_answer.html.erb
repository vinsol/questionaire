
<% if params[:id] != "" %>
  <% (1..4).each do |index| %>
    <% if @question.options[index-1] %>
      <%= text_field_tag "question[option[#{index}]]", @question.options[index-1].body %>&nbsp;&nbsp;&nbsp;&nbsp;<%= check_box_tag "question[answer[#{index}]]", value = index %><br/>
    <% else %>
      <%= text_field_tag "question[option[#{index}]]" %>&nbsp;&nbsp;&nbsp;&nbsp;<%= check_box_tag "question[answer[#{index}]]", value = index %><br/>
    <% end %>
  <% end %>
  <script>
  var options = $("input[id^= 'question_option_']");
  for(var i = 0; i<options.length; i++) {
    "<% @question.answers.each do |ans| %>"
      if (options[i].value == "<%= ans.body %>") {
        var id = options[i].id.replace("option", "answer");
        document.getElementById(id).checked = true;
      }
    "<% end %>"
  }
  </script>
<% else %>
  <%= text_field_tag "question[option[1]]" %>&nbsp;&nbsp;&nbsp;&nbsp;<%= check_box_tag 'question[answer[1]]', value = "1" %><br/>
  <%= text_field_tag "question[option[2]]" %>&nbsp;&nbsp;&nbsp;&nbsp;<%= check_box_tag 'question[answer[2]]', value = "2" %><br/>
  <%= text_field_tag "question[option[3]]" %>&nbsp;&nbsp;&nbsp;&nbsp;<%= check_box_tag 'question[answer[3]]', value = "3" %><br/>
  <%= text_field_tag "question[option[4]]" %>&nbsp;&nbsp;&nbsp;&nbsp;<%= check_box_tag 'question[answer[4]]', value = "4" %>
<% end %>
